<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>接口测试中心</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="../../static/layui/css/layui.css">
</head>
<body>
    <div class="layui-layout layui-layout-admin">
        <!-- 导航栏 -->
        <div class="nav">
            <div class="layui-header">
            <!-- 头部区域 -->
                <div class="layui-logo">
                    <span style="font-size: large" >
                        <a href="../page/index.html"><b style="color: lightseagreen">SnokeAutoTest</b></a>
                    </span>
                </div>
                <ul class="layui-nav layui-layout-left">
                    <li class="layui-nav-item"><a href="../page/IFTestByCasePage.html">接口测试</a></li>
                    <li class="layui-nav-item"><a href="">UI测试</a></li>
                    <li class="layui-nav-item"><a href="">性能</a></li>
                    <li class="layui-nav-item">
                        <a href="javascript:;">账户管理</a>
                        <dl class="layui-nav-child">
                          <dd><a href="">邮件管理</a></dd>
                          <dd><a href="">消息管理</a></dd>
                          <dd><a href="">授权管理</a></dd>
                        </dl>
                    </li>
                </ul>
                <ul class="layui-nav layui-layout-right">
                    <li class="layui-nav-item">
                    <a href="javascript:;">
                    <img src="../../static/layui/images/headSculpture/monkey.jpg" class="layui-nav-img">name
                    </a>
                    <dl class="layui-nav-child">
                      <dd><a href="">基本资料</a></dd>
                      <dd><a href="">安全设置</a></dd>
                    </dl>
                    </li>
                    <li class="layui-nav-item"><a href="">退出</a></li>
                </ul>
            </div>
            <div class="layui-side layui-bg-black">
            <!-- 左侧导航区域 -->
                <div class="layui-side-scroll">
                    <ul class="layui-nav layui-nav-tree layui-this" >
                        <li class="layui-nav-item layui-nav-itemed">
                        <a class="if-auto" href="javascript:;">接口管理中心</a>
                        <dl class="layui-nav-child">
                            <dd><a href="../page/IFTest.html ">接口管理</a></dd>
                            <dd><a href="../page/IFTestByCasePage.html">用例管理</a></dd>
                        </dl>
                        </li>
                        <li class="layui-nav-item layui-nav-itemed">
                        <a href="javascript:;">配置中心</a>
                        <dl class="layui-nav-child">
                            <dd><a href="javascript:;">项目配置</a></dd>
                            <dd><a href="">成员管理</a></dd>
                        </dl>
                        </li>
                        <li class="layui-nav-item"><a href=""></a></li>
                    </ul>
                </div>
            </div>
            <div class="layui-footer">
            <!-- 底部固定区域 -->
                © TestAutoFalsk 2020 - 0.1
            </div>
        </div>

        <div class="layui-body">
            <!-- 面包屑 -->
            <div id="bread crumb">
                <span class="layui-breadcrumb">
                <p>&nbsp</p>
                <a href="index.html">&nbsp&nbsp&nbsp&nbsp首页</a>
                <a href="">接口测试</a>
                <a><cite><b>接口管理</b></cite></a>
                <hr />
                </span>
            </div>

            <form class="layui-form layui-form-pane1"  lay-filter="first" id="urlbar" method="post">
                <fieldset class="layui-elem-field" style="background-color: #f2f2f2">
                <legend>CaseName</legend>
                    <div class="layui-field-box layui-row layui-col-space20">
                        <span class="layui-col-md1" id="request_method" >
                            <select name="request_method" lay-verify="required" lay-verType="tips">
                                <option value="get">GET</option>
                                <option value="post">POST</option>
                            </select>
                        </span>
                        <span class="layui-col-md7" id="request_url">
                            <input type="text" name="request_url" lay-verify="required|title" lay-reqText="标题不能为空"
                                   required placeholder="请输入地址" autocomplete="off" class="layui-input" >
                        </span>
                        <span class="layui-col-md1" id="submit-btn">
                            <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
                        </span>
                        <span class="layui-col-md1" id="reset-btn">
                            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                        </span>
                    </div>
                </fieldset>
                <div class="layui-tab layui-tab-brief" id="request_data" lay-filter="resBobyTabBrief">
                    <ul class="layui-tab-title">
                        <li class="layui-this">Params</li>
                        <li>Headers</li>
                        <li>Boby</li>
                        <li>Test</li>
                    </ul>
                    <div class="layui-tab-content" style="height: 275px;">
                        <div class="layui-tab-item layui-show">
                            <table id="paramTable" lay-filter="paramTable"></table>
                        </div>
                        <div class="layui-tab-item">2</div>
                        <div class="layui-tab-item layui-col-lg10" id="request_boby">
                            <textarea name="request_boby" class="layui-textarea" style="height: 275px;"></textarea>
                        </div>
                        <div class="layui-tab-item">4</div>
                    </div>
                </div>
            </form>

            <div class="layui-row" id="response">
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend style="color:#8D8D8D;">Response</legend>
                </fieldset>
                <pre class="layui-code" lay-title="返回值">
                    {{ res_test }}
                </pre>
            </div>
    </div>

<script src="../../static/layui/layui.js"></script>
<script type="text/html" id="barParamTable">
    <button class="layui-btn layui-btn-xs" lay-event="add">添加</button>
    <button class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</button>
</script>
<script>
layui.use(['element','form', 'layedit', 'laydate','table','layer','code'], function(){
    var element = layui.element
        ,form = layui.form
        ,layedit = layui.layedit
        ,laydate = layui.laydate
        ,table = layui.table
        ,layer = layui.layer
        ,code = layui.code()
        ,$ = layui.$;

    //参数表格
    table.render({
        elem: '#paramTable'
        ,url: '../../test/table/params_demo.json'
        ,height:'275'
        ,cols: [[
          {field:'params',  title: 'Params', width:'20%', edit: 'text'}
          ,{field:'values', title: 'Values', width: '60%', edit: 'text'}
          ,{field:'operation', title: 'Operation', width: '20%', toolbar: '#barParamTable'}
        ]]
    });

    //修改参数表格内容
    table.on('edit(paramTable)', function(obj){
    var value = obj.value //得到修改后的值
    ,data = obj.data //得到所在行所有键值
    ,field = obj.field; //得到字段
    });

    //监听工具条
    table.on('tool(paramTable)', function(obj){ //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
        var data = obj.data; //获得当前行数据
        var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
        var tr = obj.tr; //获得当前行 tr 的 DOM 对象（如果有的话）
        var cbList = [];
        if(layEvent === 'del'){ //删除
            layer.confirm('您是否要删除这条参数？', function(index){
            obj.del(); //删除对应行（tr）的DOM结构，并更新缓存
            layer.close(index);//向服务端发送删除指令
            });
        } else if(layEvent === 'add'){//删除
                         var newCol = {
                        "params": "1",
                        "values": "2",
                        "operation": "",
                        };
                        cbList = table.cache.paramTable;
                        for (var i = 0; i < cbList.length; i++) {
                            cbList.push(tableBak[i]);      //将之前的数组备份
                             }
                        cbList.push(newCol);
                        table.reload("paramTable", {
                            data: cbList,
                        });
        }
        });
    //监听提交
    form.on('submit(*)', function(data){
    console.log(data)
    alert(JSON.stringify(data.field));
    return false;
    });
});
</script>
</body>

</html>